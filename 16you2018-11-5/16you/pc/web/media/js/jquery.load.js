Object.defineProperty=null;var oldHandleMesageHook=null;var curSetHookCount=0;var shareTo="";var shareToMsg="";var ua=navigator.userAgent.toLowerCase();var is_iphone=/iphone|ipad|ipod/.test(ua);function setHandleMessageHookForWeixin(){try{if(curSetHookCount>15){return}if(!window.WeixinJSBridge){setTimeout("setHandleMessageHookForWeixin()",1000);curSetHookCount++;return}if(oldHandleMesageHook===null){oldHandleMesageHook=window.WeixinJSBridge._handleMessageFromWeixin;window.WeixinJSBridge._handleMessageFromWeixin=function(G){try{var F=G["__json_message"];var C=F["__event_id"];if(C&&C.indexOf("share")>0){var D="sendAppMessage";var H;if(is_iphone){var B=F["__params"];shareTo=B["shareTo"];if(shareTo=="timeline"){D="shareTimeline"}else{if(shareTo=="friend"){D="sendAppMessage"}}restoreHandleMessageHookForWeixin();window.WeixinJSBridge._handleMessageFromWeixin(G)}else{if(C.indexOf("appmessage")>0){D="sendAppMessage";shareToMsg="friend"}else{if(C.indexOf("timeline")>0){shareToMsg="timeline";D="shareTimeline"}}}if(D=="shareTimeline"){H={"link":sharedata.link,"desc":sharedata.desc,"title":sharedata.title,"img_url":sharedata.imgUrl}}else{H={"link":sharedata.link,"desc":sharedata.desc,"title":sharedata.title,"img_url":sharedata.imgUrl,"appId":"wxcaebd5318cdb7fa1","data_url":"","type":"link","verifyAppId":"wxcaebd5318cdb7fa1","verifyNonceStr":"wbwg6wxgo0w9udi","verifySignType":"sha1","verifySignature":"354c1a2d6372e405539a8f46fbf62ad183a283ec","verifyTimestamp":"1477579098"}}window.WeixinJSBridge.invoke(D,H,shareCallback);restoreHandleMessageHookForWeixin();if(shareTo!=""){setTimeout(function(){curSetHookCount=0;oldHandleMesageHook=null;setHandleMessageHookForWeixin()},2000)}}}catch(E){}}}}catch(A){}}function restoreHandleMessageHookForWeixin(){if(oldHandleMesageHook!==null){window.WeixinJSBridge._handleMessageFromWeixin=oldHandleMesageHook;oldHandleMesageHook=null}}function shareCallback(B){var A=B["err_msg"];if(A&&shareTo==""){if(A.indexOf(":confirm")!=-1||A.indexOf(":ok")!=-1){sharedata.success(shareToMsg)}curSetHookCount=0;oldHandleMesageHook=null;setHandleMessageHookForWeixin()}}setHandleMessageHookForWeixin();function alertUI(C,D,A){var E=document.getElementById("alertUI");D=(D?D:"温馨提示"),C=(C?C:"");if(E==null){var B='<div id="alertUI" style="width:100%;height:100%; background:rgba(0,0,0,0.5);position: fixed; left:0px; top: 0px; z-index: 999999999;display:none;"><div  style="width:85%; background: #FFF; margin: 220px auto;border: 1px solid #CFCFCF;border-radius:3px;max-width:500px;"><h1 class="alertUI_title" style="margin:0px; padding: 15px 0 5px; font-family:\'arial\';font-size: 22px;line-height:30px;font-weight: normal;color:#000;text-align:center;">温馨提示</h1><div class="alertUI_content" style="padding:5px 20px;font-size: 17px;font-family:\'arial\'; color: #676767;"></div><p style="margin:0px; border-top:1px solid #cfcfcf; text-align:center; margin-top:20px"><a class="alertUI_button" style="font-family:\'arial\'; font-size:18px;color:#3cc51f;cursor: pointer;display:block;line-height:50px;text-align:center;">确定</a></p></div></div>';document.body.insertAdjacentHTML("beforeEnd",B)}var E=document.getElementById("alertUI");E.querySelectorAll(".alertUI_title")[0].innerHTML=D;E.querySelectorAll(".alertUI_content")[0].innerHTML=C;E.querySelectorAll(".alertUI_button")[0].onclick=function(){E.style.display="none";if(typeof A=="function"){A()}};E.style.display="block";return false}var hiddenProperty="hidden" in document?"hidden":"webkitHidden" in document?"webkitHidden":"mozHidden" in document?"mozHidden":null;var visibilityChangeEvent=hiddenProperty.replace(/hidden/i,"visibilitychange");var onVisibilityChange=function(){if(!document[hiddenProperty]){if(shareTo=="timeline"||shareTo=="friend"){sharedata.success(shareTo)}}};document.addEventListener(visibilityChangeEvent,onVisibilityChange);